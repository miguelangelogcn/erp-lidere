rules_version = '2';

service cloud.firestore {
  match /databases/{database}/documents {

    // Regras de Usuários e Cargos
    match /users/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }
    match /roles/{roleId} {
      allow read, write: if request.auth != null;
    }
    match /progress/{userId} {
      allow read, write: if request.auth != null && request.auth.uid == userId;
    }

    // Regras de Vendas
    match /contacts/{contactId} {
      allow read, write: if request.auth != null;
    }
    match /companies/{companyId} {
      allow read, write: if request.auth != null;
    }
    match /pipelines/{pipelineId} {
      allow read, write: if request.auth != null;
    }
    match /deals/{dealId} {
      allow read, write: if request.auth != null;
    }
    match /deals/{dealId}/comments/{commentId} {
      allow read, write: if request.auth != null;
    }
    
    // Regras de Operações e Conteúdo
    match /products/{productId} {
      allow read, write: if request.auth != null;
    }
    match /courses/{courseId} {
      allow read, write: if request.auth != null;
    }
    match /courses/{courseId}/{subcollection}/{docId} {
       allow read, write: if request.auth != null;
    }
    match /courses/{courseId}/{subcollection}/{docId}/{lessonsCollection}/{lessonId} {
       allow read, write: if request.auth != null;
    }
    match /onboardings/{onboardingId} {
      allow read, write: if request.auth != null;
    }
    match /followUps/{followUpId} {
      allow read, write: if request.auth != null;
    }
    match /followUps/{followUpId}/{subcollection}/{docId} {
       allow read, write: if request.auth != null;
    }
    
    // Regras de Configurações
    match /contactCustomFields/{fieldId} {
       allow read, write: if request.auth != null;
    }
    match /employeeCustomFields/{fieldId} {
       allow read, write: if request.auth != null;
    }

    // Regras Financeiro
     match /financialAccounts/{accountId} {
      allow read, write: if request.auth != null;
    }
     match /financialDebts/{debtId} {
      allow read, write: if request.auth != null;
    }

    // Regras de Marketing
    match /campaigns/{campaignId} {
        allow read, write: if request.auth != null;
    }
    match /dispatches/{dispatchId} {
        allow read, write: if request.auth != null;
    }
    match /duplicatesReport/{reportId} {
       allow read, write: if request.auth != null;
    }
  }
}
